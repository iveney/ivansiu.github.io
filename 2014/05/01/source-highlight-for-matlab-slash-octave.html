<!DOCTYPE html>
<!--
    So Simple Jekyll Theme 3.2.0
    Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/so-simple-theme/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  

  
    
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Source-highlight for matlab/octave | Ivan Xiao</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Source-highlight for matlab/octave" />
<meta name="author" content="Ivan Xiao" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Engineer. Father. Cat Lover. Guitarist. Ballroom Dancer. Woodworker." />
<meta property="og:description" content="Engineer. Father. Cat Lover. Guitarist. Ballroom Dancer. Woodworker." />
<link rel="canonical" href="https://www.ivansiu.com/2014/05/01/source-highlight-for-matlab-slash-octave" />
<meta property="og:url" content="https://www.ivansiu.com/2014/05/01/source-highlight-for-matlab-slash-octave" />
<meta property="og:site_name" content="Ivan Xiao" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-05-01T06:59:40+00:00" />
<script type="application/ld+json">
{"url":"https://www.ivansiu.com/2014/05/01/source-highlight-for-matlab-slash-octave","@type":"BlogPosting","headline":"Source-highlight for matlab/octave","dateModified":"2014-05-01T06:59:40+00:00","datePublished":"2014-05-01T06:59:40+00:00","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://www.ivansiu.com/images/xiao.png"},"name":"Ivan Xiao"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.ivansiu.com/2014/05/01/source-highlight-for-matlab-slash-octave"},"author":{"@type":"Person","name":"Ivan Xiao"},"description":"Engineer. Father. Cat Lover. Guitarist. Ballroom Dancer. Woodworker.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/skins/dark.css">
  <link rel="alternate" type="application/atom+xml" title="Ivan Xiao" href="/feed.xml">
<!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<!-- end custom head snippets -->

</head>


  <body class="layout--post  source-highlight-for-matlab-octave">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    
  <div class="navigation-wrapper">
    <a href="#menu-toggle" id="menu-toggle">Menu</a>
    <nav id="primary-nav" class="site-nav animated drop">
      <ul><li><a href="/">Home</a></li><li><a href="/archive/">Archive</a></li><li><a href="/categories/">Categories</a></li><li><a href="/tags/">Tags</a></li><li><a href="/search/">Search</a></li></ul>
    </nav>
  </div><!-- /.navigation-wrapper -->


    <header class="masthead">
  <div class="wrap">
    
      <a href="/" class="site-logo" rel="home" title="Ivan Xiao">
        <img src="/images/xiao.png" class="site-logo-img animated fadeInDown" alt="Ivan Xiao">
      </a>
    
    
    
      
        <div class="site-title animated fadeIn"><a href="/">Ivan Xiao</a></div>
      
      <p class="site-description animated fadeIn" itemprop="description">Engineer. Father. Cat Lover. Guitarist. Ballroom Dancer. Woodworker.</p>
    
  </div>
</header><!-- /.masthead -->


    <main id="main" class="main-content" aria-label="Content">
  <article class="h-entry">
    

    <div class="page-wrapper">
      <header class="page-header">
        
        
          <h1 id="page-title" class="page-title p-name">Source-highlight for matlab/octave
</h1>
        
      </header>

      <div class="page-sidebar">
        <div class="page-author h-card p-author"><img src="/images/ivan-memoji.jpg" class="author-avatar u-photo" alt="Ivan Xiao"><div class="author-info"><div class="author-name">
        <span class="p-name">Ivan Xiao</span>
      </div><ul class="author-links"><li class="author-link">
            <a class="u-url" rel="me" href="https://about.me/iveney"><i class="fas fa-external-link-square-alt fa-lg" title="About"></i></a>
          </li><li class="author-link">
            <a class="u-url" rel="me" href="https://twitter.com/ivanzxiao"><i class="fab fa-twitter-square fa-lg" title="Twitter"></i></a>
          </li><li class="author-link">
            <a class="u-url" rel="me" href="https://github.com/iveney"><i class="fab fa-github-square fa-lg" title="GitHub"></i></a>
          </li></ul>

<span class="read-time">1 min read</span>

    <time class="page-date dt-published" datetime="2014-05-01T06:59:40+00:00"><a class="u-url" href="">May 1, 2014</a>
</time>

  </div>
</div>

        
  <h3 class="page-taxonomies-title">Categories</h3>
  <ul class="page-taxonomies"><li class="page-taxonomy"><a class="p-category" href="/categories/#tips" title="Pages filed under tips">tips</a></li><li class="page-taxonomy"><a class="p-category" href="/categories/#matlab" title="Pages filed under matlab">matlab</a></li><li class="page-taxonomy"><a class="p-category" href="/categories/#homebrew" title="Pages filed under homebrew">homebrew</a></li>
  </ul>


        

      </div>

      <div class="page-content">
        <div class="e-content">
          <p><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/2014-05-01-source-highlight-for-matlab-slash-octave.png" alt="" /></p>

<p>I recently worked with Matlab a lot. When in console, sometimes I want to use
<code class="language-plaintext highlighter-rouge">less</code> to quickly examine the file content, and I have already
<a href="http://superuser.com/a/71593">set it up</a>
such that it uses <a href="http://www.gnu.org/software/src-highlite/">source-highlight</a>
to output colorful escape sequence to the console.
However, source-highlight does not come with a syntax support for Matlab
by default. Luckily, this
<a href="http://blog.sina.com.cn/s/blog_4513dde60100o6o4.html">post</a> and
<a href="http://blog.sina.com.cn/s/blog_4513dde60101kpmr.html">this</a> (in Chinese)
provides a solution.</p>

<!-- more -->

<p>First of all, install source-highlight using homebrew.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">brew <span class="nb">install </span>source-highlight</code></pre></figure>

<p>Note that  source-highlight depends on boost, and as of the date of this post,
brew provides a precompiled library (bottle) for boost. However, the python
support is compiled against the system python, so if you installed a custom one
(say installed via homebrew)
and use it by default, brew will compile the boost from source instead, which
takes an extremely long time.  To prevent this, we need to unlink it first,
and link it back afterwards. That is,</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">brew <span class="nb">unlink </span>python
brew <span class="nb">link </span>python    <span class="c"># after installation</span></code></pre></figure>

<p>Go to the following folder and create two files,</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd</span> <span class="sb">`</span>brew <span class="nt">--prefix</span> source-highlight<span class="sb">`</span>/share/source-highlight</code></pre></figure>

<figure class="highlight"><pre><code class="language-ini" data-lang="ini"><span class="err">keyword</span> <span class="err">blue</span><span class="c">;
</span><span class="err">string</span> <span class="c">#a020f0;
</span><span class="err">comment</span> <span class="err">darkgreen;</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-ini" data-lang="ini"><span class="py">keyword</span> <span class="p">=</span> <span class="s">"break|case|catch|classdef|continue|else|elseif|end|for|function|global|if|otherwise|parfor|persistent|return|spmd|switch|try|while"</span>

<span class="py">keyword</span> <span class="p">=</span> <span class="s">'^\s*(break|case|catch|classdef|continue|else|elseif|end|for|function|global|if|otherwise|parfor|persistent|return|spmd|switch|try|while)(?=\s)'</span>

<span class="err">include</span> <span class="err">"function.lang"</span>

<span class="err">state</span> <span class="err">command</span> <span class="err">start</span> <span class="err">'^\s*</span><span class="nn">[a-zA-Z][\w]</span><span class="err">*(?=\s)(?!\s+\.?</span><span class="nn">[*/+-:]</span><span class="err">\s+\w)(?!\s+=)'</span> <span class="err">begin</span>
        <span class="err">comment</span> <span class="err">start</span> <span class="err">"%"</span>
        <span class="err">string</span> <span class="err">delim</span> <span class="err">'</span><span class="nn">[[:blank:]</span><span class="err">]'</span> <span class="err">'</span><span class="nn">[^%;]</span><span class="err">*'</span>
<span class="err">end</span>

<span class="err">comment</span> <span class="err">delim</span> <span class="err">"%{"</span> <span class="err">"%}"</span> <span class="err">multiline</span> <span class="err">nested</span>
<span class="err">comment</span> <span class="err">start</span> <span class="err">"%"</span>

<span class="err">string</span> <span class="err">delim</span> <span class="err">'(?&lt;!</span><span class="nn">[\w.]</span><span class="err">)\''</span> <span class="err">"'"</span> <span class="err">escape</span> <span class="err">"''"</span></code></pre></figure>

<p>Finally, edit <code class="language-plaintext highlighter-rouge">lang.map</code> to create a mapping for matlab file.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">echo</span> <span class="s1">'m = matlab.lang'</span> <span class="o">&gt;&gt;</span> lang.map</code></pre></figure>


        </div>

        

        
          

        

        <nav class="page-pagination" role="navigation">
  
    <a class="page-previous" href="/2014/01/30/batch-remove-photos-in-iphone">
      <h4 class="page-pagination-label">Previous</h4>
      <span class="page-pagination-title">
        <i class="fas fa-arrow-left"></i> Batch remove photos in iPhone, batch convert videos and upload back

      </span>
    </a>
  

  
    <a class="page-next" href="/2014/05/01/send-ctrl-a-in-tmux-after-rebinding-to-it">
      <h4 class="page-pagination-label">Next</h4>
      <span class="page-pagination-title">
        Send ctrl-a in tmux after rebinding to it
 <i class="fas fa-arrow-right"></i>
      </span>
    </a>
  
</nav>

      </div>
    </div>
  </article>
</main>


    <footer id="footer" class="site-footer">
  <!-- start custom footer snippets -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
  TeX: {
    extensions: ["mediawiki-texvc.js"],
    Macros: {
      complex: ['\\mathbb{C}'],
      norm: ['\\left\\lVert#1\\right\\rVert', 1],
      given: ['\\mathbin{\\vert}'],
      data: ['\\mathcal{D}'],
      argmax: ['\\mathop{\\arg\\,\\max}\\limits'],
    }
  }
  });
</script>
<!-- end custom footer snippets -->
<div class="social-icons"><a class="social-icon" href="https://about.me/iveney"><i class="fas fa-external-link-square-alt fa-2x" title="About"></i></a><a class="social-icon" href="https://twitter.com/ivanzxiao"><i class="fab fa-twitter-square fa-2x" title="Twitter"></i></a><a class="social-icon" href="https://github.com/iveney"><i class="fab fa-github-square fa-2x" title="GitHub"></i></a><a class="social-icon" href="https://www.linkedin.com/in/zgxiao/"><i class="fab fa-linkedin fa-2x" title="LinkedIn"></i></a><a class="social-icon" href="/atom.xml"><i class="fas fa-rss-square fa-2x" title="Feed"></i></a></div><div class="copyright">
    
      <p>&copy; 2021 Ivan Xiao. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/mmistakes/so-simple-theme" rel="nofollow">So Simple</a>.</p>
    
  </div>
</footer>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>


<!-- MathJax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  </body>

</html>
